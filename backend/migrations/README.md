# 数据库迁移说明

## 添加帖子浏览记录表

运行以下 SQL 脚本来创建 `post_views` 表：

```bash
psql -U your_username -d forum_db -f add_post_views_table.sql
```

或者在 PostgreSQL 客户端中直接执行 `add_post_views_table.sql` 文件的内容。

## 功能说明

这个表用于记录用户浏览帖子的历史，实现以下功能：

1. **浏览次数去重**：
   - 已登录用户：同一用户对同一帖子只计算一次浏览次数
   - 未登录用户：同一IP地址在24小时内对同一帖子只计算一次浏览次数

2. **数据统计**：可以用于分析帖子的浏览情况

## 注意事项

- 如果表已存在，脚本会跳过创建（使用 `IF NOT EXISTS`）
- 索引会自动创建，不会重复创建
- 对于未登录用户，24小时内的重复浏览不会增加浏览次数

