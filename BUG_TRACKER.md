# REForum Bug Tracker

本文档记录每次版本更新迭代中出现的 Bug 及其修复情况。

---

## 2025-12-02 - v1.4.1

### Bug #001: 移动端通知下拉菜单显示不全

**严重程度**: 中等  
**影响范围**: 移动端用户  
**状态**: ✅ 已修复

**问题描述**:
- 在移动设备上，通知下拉菜单被截断或显示不完整
- 通知内容可能被底部导航栏遮挡
- 小屏幕上通知文字过大，导致显示不全

**复现步骤**:
1. 在移动设备上打开 REForum
2. 点击右上角的通知图标
3. 通知下拉菜单可能被截断或显示不完整

**根本原因**:
- 通知下拉菜单使用绝对定位，在移动端可能超出视口
- 缺少针对移动端的响应式样式
- 最大高度计算未考虑移动端底部导航栏

**修复方案**:
- 在移动端（768px 以下）使用固定定位（fixed positioning）
- 调整下拉菜单的位置和尺寸，确保完全显示在视口内
- 优化通知项的字体大小和内边距
- 改进最大高度计算，避免内容被遮挡

**修复文件**:
- `frontend/src/components/Inbox.css`

**测试验证**:
- ✅ 在移动设备上测试通知下拉菜单完全显示
- ✅ 验证不同屏幕尺寸下的显示效果
- ✅ 确认通知内容不被底部导航栏遮挡

**相关提交**:
- Commit: `fix: Mobile notification dropdown display issues`

---

## 2025-12-02 - v1.4.0

### Bug #002: 通知功能返回 500 错误

**严重程度**: 高  
**影响范围**: 所有用户  
**状态**: ✅ 已修复

**问题描述**:
- 访问通知 API 时返回 500 内部服务器错误
- 创建帖子后其他用户没有收到通知
- 前端控制台显示 "Failed to fetch unread count" 和 "Failed to fetch notifications"

**复现步骤**:
1. 登录账户
2. 查看右上角通知图标
3. 控制台显示 500 错误

**根本原因**:
- 数据库表 `notifications` 未创建
- 缺少表存在性检查
- 错误处理不够详细

**修复方案**:
- 添加数据库表存在性检查
- 改进错误处理和日志记录
- 创建详细的设置指南文档
- 更新诊断脚本检查 notifications 表

**修复文件**:
- `backend/models/Notification.js`
- `backend/controllers/notificationController.js`
- `backend/scripts/check-backend.js`
- `docs/NOTIFICATION_SETUP.md`

**测试验证**:
- ✅ 运行数据库迁移脚本
- ✅ 验证通知 API 正常工作
- ✅ 确认创建帖子时生成通知

**相关提交**:
- Commit: `fix: Improve notification error handling and add table existence check`

---

## 2025-12-01 - v1.3.2

### Bug #003: 头部导航按钮在特定宽度下不对齐

**严重程度**: 低  
**影响范围**: 中等屏幕用户  
**状态**: ✅ 已修复

**问题描述**:
- 在特定像素宽度下，头部导航按钮显示不对齐
- 右侧有大量留白

**修复方案**:
- 优化 Grid 布局，使用 `1fr auto 1fr` 确保左右对称
- 调整按钮对齐方式

**修复文件**:
- `frontend/src/components/Header.css`

---

## 2025-12-01 - v1.3.2

### Bug #004: 响应式布局问题

**严重程度**: 中等  
**影响范围**: 移动端用户  
**状态**: ✅ 已修复

**问题描述**:
- 帖子详情页标题在小屏幕上过大
- 首页和帖子卡片在移动端布局拥挤
- 错误状态提示在窄屏上显示不佳

**修复方案**:
- 添加 768px 和 480px 断点的响应式样式
- 优化字体大小、间距和布局

**修复文件**:
- `frontend/src/pages/PostDetail.css`
- `frontend/src/pages/Home.css`
- `frontend/src/components/PostCard.css`
- `frontend/src/App.css`

---

## Bug 分类统计

### 按严重程度
- **高**: 1 个
- **中等**: 2 个
- **低**: 1 个

### 按影响范围
- **所有用户**: 1 个
- **移动端用户**: 2 个
- **特定屏幕尺寸**: 1 个

### 按状态
- **已修复**: 4 个
- **待修复**: 0 个
- **已知问题**: 0 个

---

## 报告 Bug

如果发现新的 Bug，请：
1. 在 GitHub Issues 中创建问题报告
2. 提供详细的复现步骤
3. 包含错误截图和日志
4. 说明影响范围和严重程度

---

## 更新记录

- 2025-12-02: 创建 Bug Tracker 文档，记录 v1.4.0 和 v1.4.1 的 Bug

